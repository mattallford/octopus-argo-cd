apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: taskflow

resources:
- ../../base

images:
- name: mattallford/taskflow-api
  newTag: "1.1.18"
- name: mattallford/taskflow-web
  newTag: "1.1.18"

patches:
- path: configmap-patch.yaml
  target:
    kind: ConfigMap
    name: taskflow-config
- path: postgres-patch.yaml
  target:
    kind: Deployment
    name: taskflow-postgres
- path: ingress-patch.yaml
  target:
    kind: Ingress
    name: taskflow-ingress

labels:
- pairs:
    environment: production
    app.kubernetes.io/instance: taskflow

generatorOptions:
  disableNameSuffixHash: true